---
import BlogLayout from "../../layouts/BlogLayout.astro";
import { getCollection, type CollectionEntry } from "astro:content";
import { render } from "astro:content";

export const prerender = true;

export async function getStaticPaths() {
  const blogEntries = await getCollection("blog");
  return blogEntries.map((entry: any) => ({
    params: { slug: entry.id },
    props: {
      post: entry,
      pageTitle: entry.data.title,
      description: entry.data.description,
      keywords: entry.data.keywords,
      image: entry.data.cover,
      author: {
        name: entry.data.author.name,
        description: entry.data.author.description,
        image: entry.data.author.image,
      },
      pubDate: entry.data.pubDate,
    },
  }));
}

const { post, pageTitle, description, keywords, image, author, pubDate } =
  Astro.props;
const { Content } = await render(post);
---

<BlogLayout
  pageTitle={pageTitle}
  description={description}
  keywords={keywords}
  image={image}
  author={author}
  pubDate={pubDate}
  post={post}
  Pasa
  el
  post
  al
  layout
>
  {/* Pasa el post al layout */}
  <Content />
  {/* Renderiza el contenido del post */}
</BlogLayout>
